<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Hello</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body>
  <app-root></app-root>
  <h1>Static Web Apps Database Connections</h1>
  <blockquote>
    Open the console in the browser developer tools to see the API responses.
  </blockquote>
  <div>
    <button id="list" onclick="list()">List</button>
    <button id="get" onclick="get()">Get</button>
    <button id="retrieve" onclick="retrieve()">Retrieve</button>

    <button id="update" onclick="update()">Update</button>
    <button id="create" onclick="create()">Create</button>
    <button id="delete" onclick="del()">Delete</button>
  </div>
  <script>

    async function retrieve() {
      //const endpoint = '/data-api/rest/degree';
      const degree_id = 1;

      const gql = `
        query getById($degree_id: Int!) {
        degree_by_pk(degree_id: $degree_id) {
            degree_name
        }
      }`;

      const query = {
        query: gql,
        variables: {
          degree_id: degree_id,
        },
      };
      const endpoint = "/data-api/graphql";
      console.log(JSON.stringify(query));
      const response = await fetch(endpoint, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(query),
      });

      const result = await response.json();
      console.log(result);
      console.log("seeing student 1 data");


    }

    async function list() {
      const endpoint = '/data-api/rest/degree';
      const response = await fetch(endpoint);
      const data = await response.json();
      console.table(data.value)
      console.log(data);
      console.log('test');
    }

    async function get() {
      const endpoint = `/data-api/rest/department_college`;
      const response = await fetch(endpoint);
      const result = await response.json();
      console.table(result.value);
      console.log(result);
    }



  </script>
</body>

</html>