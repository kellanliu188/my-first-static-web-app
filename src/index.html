<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Hello</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body>
  <app-root></app-root>
  <h1>Static Web Apps Database Connections</h1>
  <blockquote>
    Open the console in the browser developer tools to see the API responses.
  </blockquote>
  <div>
    <button id="list" onclick="list()">Get Degree Data</button>
    <button id="get" onclick="get()">Get Dept Data</button>
    <button id="retrieve" onclick="retrieve()">Get Class 1</button>

    <!-- <button id="update" onclick="update()">Update</button> -->
    <!-- <button id="create" onclick="create()">Create</button> -->
    <!-- <button id="delete" onclick="del()">Delete</button> -->
    <button id="course" onclick="getCourseData()">Get Course Data</button>


    <!-- <select name = "acaGroups" id = "acaGroups" onchange="academicGroup(this.value)">
      <option value = "1">Computer Science</option>
      <option value = "2">Information Science</option>
      <option value = "3">Statistics and Data Science</option>
    </select> -->

    <button id="course" onclick="retrieveCourseData()">Display Course Data</button>

    <p id = "courses"></p>
  </div>
  <script>

    var course = document.getElementById('courses');
    async function retrieveCourseData() {
        const endpoint = `/data-api/rest/class_data`;
        const response = await fetch(endpoint);
        const result = await response.json();
        console.log(result.value);
        //console.log(result);
        courses.text(result);
        return result.value;
      }

    // async function academicGroup(department_id) {
    //   console.log(department_id);

    // const gql = `
    //         query getById($department_id: Int!) {
    //           course_data_by_pk(department_id: $department_id) {
    //           course_name, 
    //           course_description,
    //           semester_name
    //         }
    //       }`;

    //       const query = {
    //         query: gql,
    //         variables: {
    //           class_id: class_id,
    //         },
    //       };
    //       const endpoint = "/data-api/graphql";
    //       console.log(JSON.stringify(query));
    //       const response = await fetch(endpoint, {
    //         method: "POST",
    //         headers: { "Content-Type": "application/json" },
    //         body: JSON.stringify(query),
    //       });

    //       console.log(response);
    //       const result = await response.json();
    //       console.log(result);
    //       console.log("seeing class data for ", department_id, data.course_data_by_pk);

    //}

    // async function getCourseData() {
    //   const endpoint = '/data-api/rest/course_data';
    //   const response = await fetch(endpoint);
    //   const data = await response.json();
    //   console.table(data.value)
    //   console.log(data);
    //   console.log('Getting course data');
    // }


    // async function retrieveClass() {
    //   const class_id = 1;

    //   const gql = `
    //     query getById($class_id: Int!) {
    //       course_data_by_pk(class_id: $class_id) {
    //       building_name, 
    //       course_description,
    //       room_num,
    //       semester_name
    //     }
    //   }`;

    //   const query = {
    //     query: gql,
    //     variables: {
    //       class_id: class_id,
    //     },
    //   };
    //   const endpoint = "/data-api/graphql";
    //   console.log(JSON.stringify(query));
    //   const response = await fetch(endpoint, {
    //     method: "POST",
    //     headers: { "Content-Type": "application/json" },
    //     body: JSON.stringify(query),
    //   });

    //   console.log(response);
    //   const result = await response.json();
    //   console.log(result);
    //   console.log("seeing class 1 data", data.course_data_by_pk);
    // }


    // async function retrieve() {
    //   //const endpoint = '/data-api/rest/degree';
    //   const degree_id = 1;

    //   const gql = `
    //     query getById($degree_id: Int!) {
    //     degree_by_pk(degree_id: $degree_id) {
    //         degree_name
    //     }
    //   }`;

    //   const query = {
    //     query: gql,
    //     variables: {
    //       degree_id: degree_id,
    //     },
    //   };
    //   const endpoint = "/data-api/graphql";
    //   console.log(JSON.stringify(query));
    //   const response = await fetch(endpoint, {
    //     method: "POST",
    //     headers: { "Content-Type": "application/json" },
    //     body: JSON.stringify(query),
    //   });

    //   console.log(response);
    //   const result = await response.json();
    //   console.log(result);
    //   console.log("seeing student 1 data", data.degree_by_pk);
    // }

    async function list() {
      const endpoint = '/data-api/rest/degree';
      const response = await fetch(endpoint);
      const data = await response.json();
      console.table(data.value)
      console.log(data);
      console.log('test');
    }

    async function get() {
      const endpoint = `/data-api/rest/department_college`;
      const response = await fetch(endpoint);
      const result = await response.json();
      console.log(result.value);
      console.log(result);
    }

    async function retrieve() {
      const endpoint = `/data-api/rest/class_data`;
      const response = await fetch(endpoint);
      const result = await response.json();
      console.log(result.value);
      console.log(result);
    }

    // async function retrieve() {

    //   const gql = `
    //   {
    //     course_info {
    //       course_info {
    //         class_id
    //         course_name
    //       }
    //     }
    //   }`;

    //   const endpoint = "http://localhost:4280/data-api/graphql";
    //   const response = await fetch(endpoint, {
    //     method: "POST",
    //     headers: { "Content-Type": "application/json" },
    //     body: JSON.stringify({ query: gql })
    //   });
    //   const result = await response.json();
    //   console.log(result);
    // }

  </script>
</body>

</html>